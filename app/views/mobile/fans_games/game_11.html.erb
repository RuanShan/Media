<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>中秋吃月饼大赛</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="address=no">
<meta name="viewport" id="viewport" content="target-densitydpi=device-dpi,width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="author" content="cgi.beijing">
<meta name="copyright" content="">
<%= stylesheet_link_tag "/stylesheets/fans_game/main_moon" %>
<%= javascript_include_tag "jquery","/javascripts/fans_game/jquery.preload.min","/javascripts/fans_game/resize","/javascripts/fans_game/page" %>
</head>
<body>
<div id="loading"></div>
<div id="container" ></div>
<script type="text/javascript">if(typeof(pgvMain)=="function"){pgvMain()};</script>
<script>
$(function() {
$("#loading").css("line-height", $(window).innerHeight() + "px");
$("#loading").css("opacity", 0.6);
init();
preloadImg()
});
var items = [];

function init() {
	items.push({
		name: "c1",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c1.jpg"
	});
	items.push({
		name: "c2",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c2.png"
	});
	items.push({
		name: "c3",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c3.png"
	});
	items.push({
		name: "c4",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c4.png"
	});
	items.push({
		name: "c5",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c5.png"
	});
	items.push({
		name: "c6",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c6.png"
	});
	items.push({
		name: "c7",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c7.png"
	});
	items.push({
		name: "c8",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c8.png"
	});
	items.push({
		name: "c9",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c9.png"
	});
	items.push({
		name: "c10",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c10.png"
	});
	items.push({
		name: "c12",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c12.png"
	});
	items.push({
		name: "c13",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c13.png"
	});
	items.push({
		name: "c14",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c14.png"
	});
	items.push({
		name: "c15",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: ""
	});
	items.push({
		name: "c16",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c16.png"
	});
	items.push({
		name: "c17",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c17.png"
	});
	items.push({
		name: "c18",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c18.png"
	});
	items.push({
		name: "c19",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c19.png"
	});
	items.push({
		name: "c20",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c20.png"
	});
	items.push({
		name: "c21",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c21.png"
	});
	items.push({
		name: "c22",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c22.png"
	});
	items.push({
		name: "c23",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c23.png"
	});
	items.push({
		name: "c24",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c24.png"
	});
	items.push({
		name: "c25",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c25.png"
	});
	items.push({
		name: "c26",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c26.png"
	});
	items.push({
		name: "c27",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c27.png"
	});
	items.push({
		name: "c28",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c28.png"
	});
	items.push({
		name: "c29",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c29.png"
	});
	items.push({
		name: "c30",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c30.png"
	});
	items.push({
		name: "c31",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c31.png"
	});
	items.push({
		name: "c32",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c32.png"
	});
	items.push({
		name: "c33",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c33.png"
	});
	items.push({
		name: "c34",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c34.png"
	});
	items.push({
		name: "c35",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c35.png"
	});
	items.push({
		name: "c31m",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c31.png"
	});
	items.push({
		name: "c32m",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c32.png"
	});
	items.push({
		name: "c33m",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c33.png"
	});
	items.push({
		name: "c34m",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c34.png"
	});
	items.push({
		name: "c35m",
		rect: {
			t: 0,
			l: 0,
			w: 0,
			h: 0
		},
		img: "c35.png"
	});
	var a = "";
	items.forEach(function(b) {
		a += '<div class="imgElement" id="' + b.name + '"></div>'
	});
	a += '<div id="c14_">x 0</div>';
	$("#container").html(a);
	setTimeout(function() {
		resizeArea();
		$(window).resize(function() {
			resizeArea()
		});
		window.onorientationchange = function() {
			resizeArea()
		};
		load_page_1()
	}, 50)
}
var imgArr = ["http://ttxd.qq.com/cp/ttxd_cbzwdh_140505/css/cgi.waiting.png", "/images/fans_game/moon/c1.jpg", "/images/fans_game/moon/c2.png", "/images/fans_game/moon/c3.png", "/images/fans_game/moon/c4.png", "/images/fans_game/moon/c5.png", "/images/fans_game/moon/c6.png", "/images/fans_game/moon/c7.png", "/images/fans_game/moon/c8.png", "/images/fans_game/moon/c9.png", "/images/fans_game/moon/c10.png", "/images/fans_game/moon/c12.png", "/images/fans_game/moon/c13.png", "/images/fans_game/moon/c14.png", "/images/fans_game/moon/c16.png", "/images/fans_game/moon/c17.png", "/images/fans_game/moon/c18.png", "/images/fans_game/moon/c19.png", "/images/fans_game/moon/c20.png", "/images/fans_game/moon/c21.png", "/images/fans_game/moon/c22.png", "/images/fans_game/moon/c23.png", "/images/fans_game/moon/c24.png", "/images/fans_game/moon/c25.png", "/images/fans_game/moon/c26.png", "/images/fans_game/moon/c27.png", "/images/fans_game/moon/c28.png", "/images/fans_game/moon/c29.png", "/images/fans_game/moon/c30.png", "/images/fans_game/moon/c31.png", "/images/fans_game/moon/c32.png", "/images/fans_game/moon/c33.png", "/images/fans_game/moon/c34.png", "/images/fans_game/moon/c35.png"];
var loadCount = 0;

function preloadImg() {
	$.preload(imgArr, 1, function() {
		loadCount++;
		var a = Math.round((loadCount / imgArr.length) * 100);
		$("#loading").html(a + "%");
		if (loadCount >= imgArr.length) {
			$("#loading").css("display", "none")
		}
	})
};

$(document).on("click touchstart", "#c18", function(a) {
	a.preventDefault();
	a.stopPropagation();
	window.location.href = "<%= mobile_fans_games_url(supplier_id: @supplier.id) %>"
});

function winORlose() {
	if (finish_eat == true) {
		return
	} else {
		finish_eat = true
	}
	$("#c29").css("display", "none");
	$("#c10").css("display", "block");
	animArr_1.forEach(function(a) {
		$(a).css("display", "none")
	});
	animArr_2.forEach(function(a) {
		$(a).css("display", "none")
	});
	animArr_3.forEach(function(a) {
		$(a).css("display", "none")
	});
	if (eat_count <= 20) {
		$("#c22").css("display", "block")
	} else {
		if (eat_count > 20 && eat_count <= 40) {
			$("#c23").css("display", "block")
		} else {
			if (eat_count > 40) {
				$("#c24").css("display", "block")
			}
		}
	}
	setTimeout(function() {
		$("#c10").css("display", "none");
		$("#c12").css("display", "block");
		$("#c18").css("display", "block");
		$("#c19").css("display", "block");
		$("#c20").css("display", "block");
		if (eat_count <= 20) {
			chat = eat_count + "个月饼不过瘾，必须得更牛逼些！！";
			share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了5%的人，求填饱";
			share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
		} else {
			if (eat_count <= 35) {
				chat = "我勒个去，你只吃了" + eat_count + "个月饼，太慢了吧！";
				share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了15%的人，求填饱";
				share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
			} else {
				if (eat_count <= 50) {
					chat = "胃口不错，一口气吃" + eat_count + "个，吃完月饼记得再喝点小酒";
					share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了25%的人，求填饱";
					share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
				} else {
					if (eat_count <= 65) {
						chat = "万万没有想到！你吃了" + eat_count + "个月饼！放开吃，吃完哥请你喝酒！";
						share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了35%的人，求填饱";
						share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
					} else {
						if (eat_count <= 80) {
							chat = "你吃了" + eat_count + "个月饼，看样子你根本停不下来，加油，再来一次更牛的！！";
							share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了45%的人，求填饱";
							share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
						} else {
							if (eat_count <= 95) {
								chat = "你吃了" + eat_count + "个月饼，这样的速度，标准的一吃货啊，有潜质 ！";
								share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了55%的人，求填饱";
								share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
							} else {
								if (eat_count <= 110) {
									chat = "你吃了" + eat_count + "个月饼，我看你天赋异禀、骨骼惊奇，想来是百年难得一见的吃货奇才！";
									share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了65%的人，求填饱";
									share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
								} else {
									if (eat_count <= 125) {
										chat = "我勒个去，你吃了" + eat_count + "个月饼…说点什么好？记得吃药…。";
										share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了75%的人，求填饱";
										share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
									} else {
										if (eat_count <= 140) {
											chat = "你吃了" + eat_count + "个月饼，这么快的速度，够神啊";
											share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了85%的人，求填饱";
											share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
										} else {
											chat = "天啊，你竟然吃了" + eat_count + "个月饼，简直是神一般的存在，膜拜啦！";
											share = "我在中秋吃月饼大赛中吃掉了" + eat_count + "个月饼，打败了95%的人，神一般的存在！";
											share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/moon/c4.png"
										}
									}
								}
							}
						}
					}
				}
			}
		}
		$("#c20").html(chat)
	}, 2000)
}


var shareUrl = "<%= mobile_fans_game_url(supplier_id: @supplier.id,id:11) %>",
	shareTitle = "中秋吃月饼大赛，求超越！",
	share = "中秋吃月饼大赛，求超越！",
	share_imgUrl = "<%= MOBILE_DOMAIN %>/images/fans_game/game_11.jpg";
var onBridgeReady = function() {
	var a = "";
	WeixinJSBridge.on("menu:share:appmessage", function(b) {
		var f = share_imgUrl,
			c = shareUrl;
		var e = shareTitle;
		var d = share;
		WeixinJSBridge.invoke("sendAppMessage", {
			img_url: f,
			img_width: "240",
			img_height: "240",
			link: c,
			desc: d,
			title: e
		}, function(g) {})
	});
	WeixinJSBridge.on("menu:share:timeline", function(b) {
		var f = share_imgUrl,
			c = shareUrl;
		var e = shareTitle;
		var d = share;
		WeixinJSBridge.invoke("shareTimeline", {
			img_url: f,
			img_width: "240",
			img_height: "240",
			link: c,
			desc: d,
			title: d
		}, function(g) {})
	})
};
if (document.addEventListener) {
	document.addEventListener("WeixinJSBridgeReady", onBridgeReady, false)
} else {
	if (document.attachEvent) {
		document.attachEvent("WeixinJSBridgeReady", onBridgeReady);
		document.attachEvent("onWeixinJSBridgeReady", onBridgeReady)
	}
};
</script>
<%= render "application/mobile/hide_share" %>
</body>
</html>